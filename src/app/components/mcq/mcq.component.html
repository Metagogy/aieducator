<!-- <p>mcq works!</p> -->


<section *ngIf="!completedassign; else elseBlock ">
    <div class="test m-3" >
        <h3 class="m-3">{{name}}</h3>
        <form action="/Testvalidate/{{count}}" method="post" enctype="multipart/form-data">

            <!-- <input type="hidden" name="questionid" id="questionid" value="{{questions.id}}">
            <input type="hidden" name="totalcount" value="{{totalcount}}">
            <input type="hidden" name="next" value="{{next}}">
            <input type="hidden" name="previous" value="{{previous}}">
            <input type="hidden" name="timegiven" id= "timegiven" value="{{questions.timegiven}}"> -->
            <div class="card card-body shadow-3d">
                <div class="row bg-info p-2 rounded text-white">
                    <div class="col-md-10">
                        Q. Single Choice Question
                    </div>
                    <div class="col-md-2">
                        <h2><i class="far fa-clock"></i>&nbsp;<span id="time"><countdown #cd [config]="{leftTime:sec,demand:true,format:'ss' }" ></countdown></span></h2>
                    </div>
                </div>

                <div *ngIf="loading">
                    <pre>
                        <p  class="lead"><pre>{{question}}</pre>
                    </pre>
                    <ul class="list-group">
                        <li class="list-group-item mb-2"  *ngFor="let answer of answers">
                            <div class="custom-radio">
                                <div class="custom-control custom-radio">
                                    <input type="radio" (change)="ansChanged(answer)" class="custom-control-input"
                                         value={{answer.ans}} name="answer" id="{{answer.id}}"
                                        required="">
                                    <label class="custom-control-label" for="{{answer.id}}"><span>
                                            <pre>{{answer.ans}}</pre></span></label>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="container" *ngIf="!loading" style="height: 200px;">
                    <div class="row" style="height: 100%;">
                        <nz-spin class="mx-auto" nzSimple [nzSize]="'large'" ></nz-spin>
                    </div>
                </div>
                <input type="hidden" name="timeTaken" value="" id="timeTaken" />
                <button type="submit" (click)="onSubmitMCQ(question)" id="TimeButton" value="Submit Answer"
                    class="btn btn-primary">Submit Answer</button>
            </div>
        </form>
        
    </div>

  
</section>




<ng-template #elseBlock>
    <!-- {% if final_result %} -->
    <h2 class=" mt-5 mb-3" style="text-align:center;">Final Test Report</h2>
    <div class="row ml-2" style="overflow-x: auto;">
        <table class="table table-bordered" style="width: 90%">
            <tr style="width: 100%">
                <th>Question</th>
                <th>Correct Answer</th>
                <th>Submitted Answer</th>
                <th>Result</th>
            </tr>
            <!-- {% for i in final_result %} -->
            <tr *ngFor="let i of finalAnsResponse">
                <td>
                    <pre>{{i.question__question}}</pre>
                </td>
                <td>
                    <pre>{{i.corct_ans}}</pre>
                </td>
                <td>
                    <pre>{{i.ans_submit}}</pre>
                </td>
                <!-- {% if i.iscorrect == True %} -->
                <td class="text-success" *ngIf="i.iscorrect"><i class="far fa-check-circle"
                        style="font-size:36px;color:green;"></i></td>
                <!-- {% else %} -->
                <td class="text-danger" *ngIf="!i.iscorrect"><i class="far fa-times-circle"
                        style="font-size:36px;color:red;"></i></td>
                <!-- {% endif %} -->
            </tr>
            <!-- {% endfor %} -->
        </table>
    </div>
    <!-- <p>Level - 1 &nbsp;&nbsp;:&nbsp;&nbsp;{{level_percentile.easy}}&nbsp;%</p>
        <p>Level - 2 &nbsp;&nbsp;:&nbsp;&nbsp;{{level_percentile.Intermediate}}&nbsp;%</p>
        <p>Level - 3 &nbsp;&nbsp;:&nbsp;&nbsp;{{level_percentile.Difficult}}&nbsp;%</p> -->

    <h5>Final Score &nbsp;&nbsp;:&nbsp;&nbsp;{{test_percentile}}&nbsp;%</h5>
    <br>
</ng-template>